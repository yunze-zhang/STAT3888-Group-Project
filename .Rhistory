### column missingness
column_missingness = c()
for (i in 1:ncol(tech_biom1)) {
num_missing = colSums(is.na(tech_biom1[i]))
variable = colnames(tech_biom1)[i]
observations = nrow(tech_biom1)
missingness_proportion = round(num_missing / observations, 3)
column_missingness = c(column_missingness, variable, num_missing, observations, missingness_proportion)
}
library(tidyverse)
library(skimr)
kable(head(col_df))
install.packages('skimr')
install.packages('kable')
library(tidyverse)
library(skimr)
library(visdat)
library(GGally)
library(knitr)
load("tech_data.Rdata")
tech_biom1 = tech_biom[1:54] #remove XXX_MISS variables
vis_miss(tech_biom1)
### column missingness
column_missingness = c()
for (i in 1:ncol(tech_biom1)) {
num_missing = colSums(is.na(tech_biom1[i]))
variable = colnames(tech_biom1)[i]
observations = nrow(tech_biom1)
missingness_proportion = round(num_missing / observations, 3)
column_missingness = c(column_missingness, variable, num_missing, observations, missingness_proportion)
}
col_df = matrix(column_missingness, ncol=4, byrow=TRUE)
colnames(col_df) = c("Variable", "Missingness Count", "Total", "Missingness Proportion")
col_df = data.frame(col_df)
good_variables = col_df$Variable[col_df$Missingness.Proportion < 0.3]
col_df2 = col_df[col_df$Variable %in% good_variables,] # table of all "good" columns
tech_biom2 = tech_biom1[good_variables] # filtering for good columns only, arbitrary 30% column missingness threshold
### row missingness
tech_biom3 = tech_biom2[rowSums(is.na(tech_biom2)) == 0,] # filtering for good rows only, removing all rows with N/A
vis_miss(tech_biom3)
save(tech_biom3, file="cleaned_biom.Rdata")
nutr = read.csv("data/AHS11Nutrient.csv")
head(nutr)
vis_miss(nutr
vis_miss(nutr)
vis_miss(nutr, warn_large_data = FALSE)
combined_data = merge(tech_biom3, nutr)
head(combined_data)
save(combined_data, file="combined_data.Rdata")
