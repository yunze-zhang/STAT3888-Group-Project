---
title: "Data Cleaning"
output: html_document
---


```{r, warning = FALSE}
library(tidyverse)
library(skimr)
library(visdat)
library(GGally)
library(knitr)
library(dplyr)

load("tech_data.Rdata")
```


```{r}
cardio_data = tech_biom[, c("ABSPID", "BMISC", "HCHOLBC", "CHOLRESB", "CHOLNTR", "HDLCHREB", "LDLNTR", "LDLRESB", "DIASTOL", "SYSTOL", "HSUGBC")]

#Convert all columns to numeric
columns =  c("BMISC", "HCHOLBC", "CHOLRESB", "CHOLNTR", "HDLCHREB", "LDLNTR", "LDLRESB", "DIASTOL", "SYSTOL", "HSUGBC")
cardio_data[, columns] <- lapply(columns, function(x) as.numeric(cardio_data[[x]]))
head(cardio_data)
```


```{r}
vis_miss(cardio_data)
```

```{r}
clean_cardio_data = cardio_data[rowSums(is.na(cardio_data)) == 0,]
vis_miss(clean_cardio_data)
```


```{r}
nutr = read.csv("data/AHS11Nutrient.csv")
condensed_nutr = select(nutr, -ends_with("2"))
```

```{r}
head(condensed_nutr)
```
```{r}
vis_miss(condensed_nutr, warn_large_data = FALSE)
```
```{r}
combined_data = merge(clean_cardio_data, condensed_nutr)
```

```{r}
head(combined_data)
```

```{r}
save(combined_data, file="combined_data.Rdata")
```